function sendObject(e){getObject(e)}function getObject(e){var t=null;if(e instanceof Array)for(var a=0;a<e.length;a++)t=getObject(e[a]);else for(var r in e){if("name"==r&&(nameOfAllOperator.push(e[r]),1==e[r]))return e;(e[r]instanceof Object||e[r]instanceof Array)&&(t=getObject(e[r]))}return t}function getData(e){var t=null;if(e instanceof Array)for(var a=0;a<e.length;a++)t=getData(e[a]);else for(var r in e){if("children"==r&&(outputOfEachOperator.push(e[r]),1==e[r]))return e;(e[r]instanceof Object||e[r]instanceof Array)&&(t=getData(e[r]))}return t}function getProcessedDataOfOperatorName(e,t){for(var a=[],r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)e[r][n].hasOwnProperty("operator")&&e[r][n].operator===t&&a.push(e[r][n]);return a}function addHeaders(e,t){var a=$("<thead></thead>"),r=$("<tr></tr>");$(a).append(r);for(var n=0;n<t.length;n++){var s=t[n].replace("_"," "),l=$("<th>"+s+"</th>");$(r).append(l)}$(e).append(a)}function getTable(e,t){if($(".vs-result-table ").length>0){$(".vs-result-table ").remove(),$(".dataTables_length").remove(),$(".dataTables_filter").remove(),$(".dataTables_info").remove(),$(".dataTables_paginate").remove(),$(".dataTables_wrapper").remove();var a=function(e,t){var r=document.getElementsByClassName(e),n="#"+$(r).attr("id");document.getElementsByClassName(e).length?t():setTimeout((function(){a(e,t)}),100)},r="vs-result-table";a(r,(function(){var e=document.getElementsByClassName(r),t="#"+$(e).attr("id");$(t).DataTable({scrollY:"50vh",scrollCollapse:!0,search:!0}),$(".dataTables_scrollHeadInner table").removeClass("vs-result-table"),$(".dataTables_scrollHeadInner table").addClass("vs-get-header"),$(".vs-result-table tbody tr").on("click",(function(){if($(this).hasClass("vs-row-was-selected"))alert("this row was already selected before, please check the 'your selected data' area");else{var e=(modal_table=createModal(modal_for_table)).attr("id"),t="vs-panel-id-"+e,a=$("<span class='vs-close vs-close-modal' onClick=closeModal('"+e+"'); >&times;</span>"),r=$('<div class="vs-panel" id="'+t+'"></div>'),n=$('<div class="vs-modal-for-table-container">');$(this).addClass("vs-row-was-selected"),$(this).attr("id",e);var s=$('<table class="uk-table uk-table-responsive uk-table-divider vs-modal-table""></table>'),l=$("<thead></thead>"),o=$("<tr></tr>"),i=".vs-get-header thead tr",d=findPositionOFId(i),c=findPositionOfOperator(i);$(".vs-get-header thead tr").find("th").each((function(){o.append("<th>"+$(this).text()+"</th>")})),l.append(o),s.append(l);var u=$("<tbody></tbody>"),p=$("<tr></tr>"),v=$('<div class="vs-modal-for-tracing-container  uk-margin-top"></div>'),m=$('<div class="vs-modal-for-tracing-buttons uk-flex uk-flex-center"></div>'),b=$('<div class="vs-container-for-tracing-description uk-flex uk-flex-center uk-margin-top"></div>'),g=d.id_position,h=d.parent_id_position,f=c.operator_position;if(2===Object.keys(d).length||1===Object.keys(d).length){var y,k,w=$(this).find("td").eq(h).text(),C=$(this).find("td").eq(g).text(),E=$(this).find("td").eq(f).text(),_=getNeighbourOperator(E,"forward"),T;"false"!=getNeighbourOperator(E,"backward")&&(y=$('<button class="uk-button uk-button-secondary uk-margin-right vs-button-backward-tracing" id="vs-button-backward-tracing" onClick=backwardTracing('+w+',"'+E+'"); >Backward Tracing</button>'),m.append(y)),"false"!=_&&(k=$('<button class="uk-button uk-button-secondary uk-margin-right vs-button-forward-tracing" id="vs-button-forward-tracing" onClick=forwardTracing('+C+',"'+E+'"); >Forward Tracing</button>'),m.append(k)),v.append(m),v.append(b)}else(Object.keys(d).length>2||0==Object.keys(d).length)&&v.append("<p>Something went wrong, please check the data format</p>");$(this).find("td").each((function(){p.append("<td>"+$(this).text()+"</td>")})),r.append(a),u.append(p),s.append(u);var A=$('<button class="uk-button uk-button-secondary  vs-button-save-rows" id="vs-button-save-rows" onClick=saveTable("vs-modal-table"); >Save</button>');m.append(A),n.append(s),r.append(n),r.append(v),modal_table.append(r),$("#vs-visualization").append(modal),$("#content").addClass("vs-overlay"),$(".vs-modal").css("display","block"),$(".vs-modal").draggable(),adaptHeightForCss(t,e)}}))}))}for(var n="vs-result-table-"+t,s=$('<table class="uk-table vs-result-table display '+n+'" style="width:100%" id="vs-result-table-'+t+'"></table>'),l=$("<tbody></tbody>"),o=0;o<e.length;o++){var i=e[o];0===o&&addHeaders(s,Object.keys(i));var d=$("<tr></tr>");Object.keys(i).forEach((function(e){d.append($("<td>"+i[e]+"</td>"))})),l.append(d)}return $(s).append(l),[s,n]}function findPositionOfOperator(e){var t=[],a=$(e).find("th").length;for(i=0;i<a;i++)if("operator"===$(".vs-get-header thead tr ").find("th")[i].innerHTML)var r=i;return r&&(t.operator_position=r),t}function findPositionOFId(e){var t=[],a=$(e).find("th").length;for(i=0;i<a;i++){if("id"===$(".vs-get-header thead tr ").find("th")[i].innerHTML)var r=i;if("parent id"===$(".vs-get-header thead tr ").find("th")[i].innerHTML)var n=i}return r&&(t.id_position=r),n&&(t.parent_id_position=n),t}function forwardTracing(e,t){var a="forward";document.getElementById("vs-button-forward-tracing").disabled=!0;var r=getNeighbourOperator(t,a),n,s=(n=document.getElementsByClassName("vs-modal")[0]).clientHeight,l=n.clientHeight+120;if(0!=r){var o=document.createElement("div");o.setAttribute("class","vs-description_container_forwad_tracing");var i=document.createElement("input");i.setAttribute("type","checkbox"),i.setAttribute("name","vs-checkbox-forward-tracing"),i.setAttribute("class","vs-input-forward-tracing");var d=document.createElement("label");d.setAttribute("for","vs-checkbox-forward-tracing"),d.setAttribute("class","vs-label-forward-tracing");var c=document.createElement("span");c.innerHTML="Forward Tracing";var u=document.createElement("span");u.setAttribute("class","vs-checkmark-forward"),d.appendChild(i),d.appendChild(u),d.appendChild(c);var p=document.getElementsByClassName("vs-container-for-tracing-description")[0];o.appendChild(d),p.appendChild(o);var v=getProcessedDataByData(outputOfEachOperator,e,r);if(v.length>3){if(document.getElementsByClassName("vs-container-table-tracing").length>0){var m=createAlert("alert_to_continue");n.appendChild(m);var b=n.clientHeight+160;n.style.height=b+"px"}else{var g=createAlert("alert_in_modal"),n;(n=document.getElementsByClassName("vs-modal")[0]).appendChild(g),n.style.height=l+"px"}document.getElementById("vs-display-forward-table").addEventListener("click",(function(){void 0!==split_tracing&&split_tracing.destroy();var r=function(e,t){document.getElementsByClassName(e).length?t():setTimeout((function(){r(e,t)}),100)},l="vs-table-forward-tracing";r(l,(function(){var e=document.getElementsByClassName(l),t="#"+$(e).attr("id");$(t).DataTable({scrollY:"50vh",scrollX:!0,scrollCollapse:!0,search:!0}),split_tracing=Split(["#vs-table",".vs-container-table-tracing"],{direction:"horizontal",cursor:"col-resize",gutterSize:10})}));var o=createTracingContainer(a,e,t),i=document.createElement("table"),d="vs-table-forward-tracing-"+id_for_table_tracing;id_for_table_tracing++,i.setAttribute("class","vs-table-forward-tracing"),i.setAttribute("id",d);var c="vs-modal-alert";addHeaders(i,Object.keys(v[0]));var u=document.createElement("tbody");for(w=0;w<v.length;w++){var p=u.insertRow();for(var m in p.setAttribute("class","vs-forward-tracing-row"),v[w]){var b=p.insertCell(),g=document.createTextNode(v[w][m]);b.appendChild(g)}}i.append(u),o.append(i),o.style.width="50%",event.preventDefault(),document.getElementsByClassName("vs-bottom-splitter")[0].appendChild(o),document.getElementById("vs-table").style.width="50%",closeAlert(c,"id"),n.style.height=s+"px"})),document.getElementById("vs-not-display-forward-table").addEventListener("click",(function(){var e;closeAlert("vs-modal-alert","id"),n.style.height=s+"px"}))}for(var h=document.getElementsByClassName("vs-modal-table")[0].getElementsByTagName("tbody")[0],f=document.getElementsByClassName("vs-modal-table")[0].getElementsByTagName("thead")[0].getElementsByTagName("tr")[0],y=[],k=document.getElementsByClassName("vs-modal-table")[0].getElementsByTagName("thead")[0].getElementsByTagName("tr")[0].getElementsByTagName("th"),w=0;w<k.length;w++){var C=k[w].innerHTML;y.push(C)}var E=[];for(w=0;w<v.length;w++){var _=h.insertRow();for(var T in _.setAttribute("class","vs-forward-tracing-row"),v[w]){var A=T.replace("_"," ");if(1!=y.includes(A)&&1!=E.includes(A)){var O=document.createElement("th");O.setAttribute("class","vs-forward-tracing-th");var N=document.createTextNode(A);O.appendChild(N),f.appendChild(O),E.push(A)}var B=_.insertCell(),x=document.createTextNode(v[w][T]);B.appendChild(x)}}}else console.log("this was the last output");var H=function(e,t){document.getElementsByClassName(e).length?t():setTimeout((function(){H(e,t)}),100)},D;H("vs-forward-tracing-row",(function(){$(".vs-modal-table tbody tr.vs-forward-tracing-row").on("click",(function(){alert("was"),$(this).addClass("vs-selected-row")}))}))}function backwardTracing(e,t){var a="backward";document.getElementById("vs-button-backward-tracing").disabled=!0;var r=getNeighbourOperator(t,a),n;if((n=document.getElementsByClassName("vs-modal")[0]).classList.contains("vs-modal-for-nested-table"))var s=n.clientHeight,l=n.clientHeight+160;else var s=n.clientHeight,l=n.clientHeight+120;if(0!=r){var o=document.createElement("div");o.setAttribute("class","vs-description_container_backward_tracing");var i=document.createElement("input");i.setAttribute("type","checkbox"),i.setAttribute("name","vs-checkbox-backward-tracing"),i.setAttribute("class","vs-input-backward-tracing");var d=document.createElement("label");d.setAttribute("for","vs-checkbox-backward-tracing"),d.setAttribute("class","vs-label-backward-tracing");var c=document.createElement("span");c.innerHTML="Backward Tracing";var u=document.createElement("span");u.setAttribute("class","vs-checkmark-backward"),d.appendChild(i),d.appendChild(u),d.appendChild(c);var p=document.getElementsByClassName("vs-container-for-tracing-description")[0];o.appendChild(d),p.appendChild(o);var v=getProcessedDataByData(outputOfEachOperator,e,r);if(v.length>3){if(document.getElementsByClassName("vs-container-table-tracing").length>0){var m=createAlert("alert_to_continue");if(n.appendChild(m),n.classList.contains("vs-modal-for-nested-table")){var b=n.clientHeight+200;n.style.height=b+"px"}else{var b=n.clientHeight+160;n.style.height=b+"px"}}else{var g=createAlert("alert_in_modal"),n;(n=document.getElementsByClassName("vs-modal")[0]).appendChild(g),n.style.height=l+"px"}document.getElementById("vs-display-forward-table").addEventListener("click",(function(){void 0!==split_tracing&&split_tracing.destroy();var e=function(t,a){document.getElementsByClassName(t).length?a():setTimeout((function(){e(t,a)}),100)},r="vs-table-backward-tracing";e(selectorForForwardTable,(function(){var e=document.getElementsByClassName(r),t="#"+$(e).attr("id");$(t).DataTable({scrollY:"50vh",scrollX:!0,scrollCollapse:!0,search:!0}),split_tracing=Split(["#vs-table",".vs-container-table-tracing"],{direction:"horizontal",cursor:"col-resize",gutterSize:10})}));var l=createTracingContainer(a,id,t),o=document.createElement("table"),i="vs-table-backward-tracing-"+id_for_table_tracing;id_for_table_tracing++,table_forward.setAttribute("class","vs-table-backward-tracing"),table_forward.setAttribute("id",i);var d="vs-modal-alert";addHeaders(o,Object.keys(v[0]));var c=document.createElement("tbody");for(w=0;w<forward_backward_data.length;w++){var u=c.insertRow();for(var p in u.setAttribute("class","vs-backward-tracing-row"),v[w]){var m=u.insertCell(),b=document.createTextNode(v[w][p]);m.appendChild(b)}}o.append(c),l.append(o),l.style.width="50%",document.getElementsByClassName("vs-bottom-splitter")[0].appendChild(l),document.getElementById("vs-table").style.width="50%",closeAlert(d,"id"),n.style.height=s+"px"})),document.getElementById("vs-not-display-backward-table").addEventListener("click",(function(){var e;closeAlert("vs-modal-alert","id"),n.style.height=s+"px"}))}for(var h=document.getElementsByClassName("vs-modal-table")[0].getElementsByTagName("tbody")[0],f=document.getElementsByClassName("vs-modal-table")[0].getElementsByTagName("thead")[0].getElementsByTagName("tr")[0],y=[],k=document.getElementsByClassName("vs-modal-table")[0].getElementsByTagName("thead")[0].getElementsByTagName("tr")[0].getElementsByTagName("th"),w=0;w<k.length;w++){var C=k[w].innerHTML;y.push(C)}var E=[];for(w=0;w<v.length;w++){var _=h.insertRow();for(var T in _.setAttribute("class","vs-backward-tracing-row"),v[w]){var A=T.replace("_"," ");if(1!=y.includes(A)&&1!=E.includes(A)){var O=document.createElement("th");O.setAttribute("class","vs-backward-tracing-th");var N=document.createTextNode(A);O.appendChild(N),f.appendChild(O),E.push(A)}var B=_.insertCell(),x=document.createTextNode(v[w][T]);B.appendChild(x)}}}else console.log("this was the first output");var H=function(e,t){document.getElementsByClassName(e).length?t():setTimeout((function(){H(e,t)}),100)},D;H("vs-modal-table",(function(){$(".vs-modal-table tbody tr.vs-backward-tracing-row").on("click",(function(){alert("was"),$(this).addClass("vs-selected-row")}))}))}function getNeighbourOperator(e,t){var a="false";if("forward"===t){for(var r=0,n=0,s=0;s<nameOfAllOperator.length;s++)nameOfAllOperator[s]===e&&(r=s);if((r+=1)<nameOfAllOperator.length)return nameOfAllOperator[r];if(e=>nameOfAllOperator.length)return a}if("backward"===t){for(var l=0,s=0;s<nameOfAllOperator.length;s++)nameOfAllOperator[s]===e&&(l=s);return(l-=1)<0?a:nameOfAllOperator[l]}}function getProcessedDataByData(e,t,a){for(var r=[],n=0;n<e.length;n++)for(var s=0;s<e[n].length;s++)e[n][s].hasOwnProperty("operator")&&(e[n][s].operator===a&&e[n][s].id===t||e[n][s].operator===a&&e[n][s].parent_id===t)&&r.push(e[n][s]);return r}function createAlert(e){if("alert_in_modal"===e){var t=document.createElement("div"),a=document.createTextNode("This element has many successors, which makes it difficult to visualise them here. Do you want to see them in another window?"),r=document.createElement("div"),n=document.createElement("button"),s=document.createElement("button");return t.setAttribute("class","uk-alert-warning uk-padding-small uk-margin-top uk-margin-bottom"),t.setAttribute("id","vs-modal-alert"),r.setAttribute("class","uk-flex uk-flex-center uk-margin-top"),n.setAttribute("class","uk-button-secondary uk-button uk-margin-left"),n.setAttribute("id","vs-display-forward-table"),s.setAttribute("class","vs-not-display-forward-table uk-button-secondary uk-button"),s.setAttribute("id","vs-not-display-forward-table"),n.innerHTML="Yes, please",s.innerHTML="No, Thanks",t.appendChild(a),r.appendChild(s),r.appendChild(n),t.appendChild(r),t}if("alert_to_continue"===e){var l=document.createElement("div");l.setAttribute("class","vs-modal uk-alert-warning uk-padding-small uk-margin-top vs-modal-for-continue");var o=document.createElement("div");o.setAttribute("class","vs-modal-for-continue-container");var i=document.createElement("p");i.innerHTML="This element has many successors, which makes it difficult to visualise them here. You can visuaise them in another window. But you have already displayed a table with forward type content, if you want to display this information, the previous information will be removed. However, do you want to continue?";var d=document.createElement("div"),n;d.setAttribute("class","uk-flex uk-flex-center"),(n=document.createElement("button")).setAttribute("class","uk-button uk-button-secondary uk-margin-left"),n.setAttribute("id","vs-display-forward-table"),n.innerHTML="Yes, please";var c="closeTracingContainer('vs-container-table-tracing')",s;n.setAttribute("onclick",c),(s=document.createElement("button")).setAttribute("class","uk-button uk-button-secondary"),s.innerHTML="No, thanks";var c="closeTracingContainer('vs-modal-for-continue')";return s.setAttribute("onclick",c),d.appendChild(s),d.appendChild(n),o.appendChild(i),l.appendChild(o),l.appendChild(d),l}}function closeAlert(e,t){"id"===t&&document.getElementById(e).remove(),"class"===t&&(document.getElementsByClassName(e)[0].remove(),split_tracing.length&&split_tracing.destroy)}function createTracingContainer(e,t,a){var r="vs-container-table-tracing",n=document.createElement("div");n.setAttribute("class","vs-container-table-tracing");var s=document.createElement("div");s.setAttribute("class","uk-flex uk-background-primary uk-padding-small uk-margin-bottom");var l=document.createElement("p");l.setAttribute("class","uk-h2 uk-light");var o=document.createElement("button");o.setAttribute("class","uk-button uk-button-secondary uk-margin-large-left"),o.innerHTML="Close";var i="closeTracingContainer('vs-container-table-tracing')";if(o.setAttribute("onclick",i),id_for_container_tracing++,"forward"===e){var d="vs-container-table-forward-tracing-"+a+"-"+t;n.setAttribute("id",d),l.innerHTML="Forward Tracing Table from "+a+" with ID: "+t}if("backward"===e){var c="vs-container-table-backward-tracing-"+id_for_container_tracing;n.setAttribute("id",d),l.innerHTML="Backward Tracing Table from "+a+" with ID: "+t}return s.appendChild(l),s.appendChild(o),n.appendChild(s),n}function closeTracingContainer(e){document.getElementsByClassName(e).length&&(document.getElementsByClassName(e)[0].remove(),document.getElementsByClassName("vs-modal-for-continue-container").length&&(closeAlert("vs-modal-for-continue-container","class"),closeAlert("vs-modal-for-continue","class")))}function saveTable(e){var t=function(e,a){document.getElementsByClassName(e).length?a():setTimeout((function(){t(e,a)}),100)},a;t("vs-modal-table",(function(){var e=0,t=0,a,r,n=$('<div class="vs-selected-data"></div>'),s=$("<tbody></tbody>"),l=$('<table class="uk-table uk-table-responsive uk-table-divider vs-table-accordion""></table>'),o=$("<thead></thead>"),i=$("<tr></tr>");$(".vs-modal-table thead tr").find("th").each((function(){i.append("<th>"+$(this).text()+"</th>")})),o.append(i),l.append(o),$(".vs-modal-table tbody").find("tr.vs-selected-row").each((function(){body_row=$("<tr></tr>"),$(this).find("td").each((function(){body_row.append("<td>"+$(this).text()+"</td>")})),s.append(body_row)}));var d=$('<h4><a href="#">Element</a></h4>');l.append(s),n.append(l),$(".vs-droppable").append(d),$(".vs-droppable").append(n),$(".vs-droppable").accordion("refresh")}))}var nameOfAllOperator=[],outputOfEachOperator=[],modal_for_table="table",id_for_container_tracing=1,id_for_table_tracing=1,modal_table,split_tracing;modal_table=createModal(modal_for_table),$(document).ready((function(){$("#sidenav").append("<div class='vs-select'><select id='select-operator' class='vs-select-field'></select></div>"),$("#select-operator").append('<option value="0">Select Operator</option>'),$("#sidenav").append('<div class="vs-droppable-container"><div class="uk-background-secondary uk-padding-small"><p class="uk-margin-remove-bottom uk-light uk-text-center">Your selected Data<p></div><div class="vs-droppable"></div></div>'),existFiletoDisplay>0&&($.getJSON("data/data.json",(function(e){sendObject(e),getData(e);for(var t=0;t<nameOfAllOperator.length;t++){var a,r='<option value="'+(t+1)+'">'+nameOfAllOperator[t]+"</option>";$("#select-operator").append(r)}$("#select-operator").change((function(){event.preventDefault();var e=$("#select-operator option:selected").text(),t,a=getTable(getProcessedDataOfOperatorName(outputOfEachOperator,e),e),r=a[0],n=a[1];$("#vs-table").children().length>0&&$("#vs-table").empty(),$("#vs-table").append(r)}))})),$(".vs-droppable").droppable({accept:".vs-modal",drop:function(e,t){var a=t.draggable,r=$(this);$(a).detach().css({top:0,left:0}).appendTo(r),$("#content").removeClass("vs-overlay")}}),$(".vs-droppable").accordion({active:!1,collapsible:!0}),$("#vs-visualization").droppable({accept:".vs-modal",drop:function(e,t){var a=t.draggable,r=$(this);$(a).detach().css({top:0,left:0}).appendTo(r),$("#content").addClass("vs-overlay")}}))}));