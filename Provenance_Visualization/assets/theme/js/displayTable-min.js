function getEmptyRightMenu(){var e;return $("<ul class='vs-right-nested-table-menu'></ul>")}function getNumbersForRange(e){var t=[],a=[],n=[],r=[];if(3===e.length&&(a.push(e[0]),n.push(e[1]),r.push(e[2]),t.push(a),t.push(n),t.push(r)),2===e.length&&(a.push(e[0]),last.push(e[1]),t.push(a),t.push(r)),e.length>3){var i=Math.round((e.length+1)/3);console.log("sequence_for_range = "+i);for(var d=0;d<e.length;d++)console.log("i = "+d+"range_of_deep[i] = "+e[d]),a.length<i?(a.push(d),a.push(e.length[d])):n.length<i?n.push(e.length[d]):r.length<i&&r.push(e.length[d]);t.push(a),t.push(n),t.push(r)}return t}var range_of_deep=[],max_depth;$(document).ready((function(){$("#vs-displayTable").click((function(){function e(e){return e.children?0:1}var t=$("<div class='vs-nav-nested-table uk-padding-small uk-background-primary uk-light' style='display:none;'><div><p class='uk-h2'>Nested Table</p></div></div>"),a=$("<div class='vs-nav-for-tracing-description uk-flex uk-flex-end uk-margin-top'></div>"),n=$("<div class='vs-description-container-backward-tracing uk-margin-right uk-flex'></div>"),r=$("<div class='vs-description-container-forward-tracing uk-margin-right uk-flex'></div>"),i=$("<div class='vs-description-container-selected-element uk-margin-right uk-flex'></div>"),d=$("<div class='vs-save-color-combination-container uk-margin-right uk-margin-right uk-flex'></div>"),s=$("<div class='vs-color-picker' id='colors'><input type='color' value='#08bb93' name='vs-checkbox-selected-element-tracing' class='vs-input-selected-element' id='vs-color-picker-selected-element'></div>"),c=$("<div class='vs-title-color-picker'><span>Selected Element</span></div>"),o=$("<div class='vs-color-picker'><input type='color' value='#efcc6b' name='vs-checkbox-forward-tracing' class='vs-input-forward-tracing' id='vs-color-picker-forward-tracing'></div>"),p=$("<div class='vs-title-color-picker'><span>Forward Tracing</span></div>"),l=$("<div class='vs-color-picker'><input type='color' value='#a59ce9' name='vs-checkbox-backward-tracing' class='vs-input-backward-tracing' id='vs-color-picker-backward-tracing'></div>"),u=$("<div class='vs-title-color-picker'><span>Backward Tracing</span></div>"),v=$("<div class='vs-save-color-combination-checkbox'><input type='checkbox' id='vs-save-color-combination-checkbox' class='vs-save-color-combination-checkbox'></div>"),h=$("<div class='vs-save-color-combination-title'><span>Save this combination</span></div>"),f=$("<div class='vs-save-color-combination-group vs-select'><select class='vs-save-color-combination-group vs-select-field' id='vs-save-color-group'><option value='0'>Color Group</option></select></div>");i.append(s),i.append(c),r.append(o),r.append(p),n.append(l),n.append(u),d.append(v),d.append(h),a.append(r),a.append(i),a.append(n),a.append(d),a.append(f),t.append(a),t.appendTo("#vs-pie"),$(".vs-nav-nested-table").css("display","block");var g=$("#vs-pie").width(),m=$("#vs-pie").height(),k;(k=$("<svg class='vs-nested-table'></div>").attr("viewBox","0 0 "+g+" "+m)).appendTo("#vs-pie"),$("#vs-pie").append($("<ul class='vs-right-nested-table-menu'></ul>"));var k=d3.select(".vs-nested-table"),b=+g,x=+m-50,y=d3.treemap().tile(d3.treemapResquarify).size([b,x]).round(!0).paddingInner(1);d3.json("data/data.json",(function(t,a){function n(e){y(r.sum(e)),i.transition().duration(750).attr("transform",(function(e){return"translate("+e.x0+","+e.y0+")"})).select("rect").attr("width",(function(e){return e.x1-e.x0})).attr("height",(function(e){return e.y1-e.y0}))}if(t)throw t;var r=d3.hierarchy(a).eachBefore((function(e){void 0===e.data.name?e.data.id=(e.parent?e.parent.data.id+".":"")+e.data.id:e.data.id=(e.parent?e.parent.data.id+".":"")+e.data.name})).sum(e).sort((function(e,t){return t.height-e.height||t.value-e.value}));y(r);for(var i=k.selectAll("g").data(r.leaves()).enter().append("g").attr("transform",(function(e){return"translate("+e.x0+","+e.y0+")"})).attr("id",(function(e){var t=e.data.id.split("."),a="id("+t[t.length-1]+")";return e.data.hasOwnProperty("parent_id")&&(a=a+" parentId("+e.data.parent_id+")"),e.data.hasOwnProperty("operator")&&(a=a+" operator("+e.data.operator+")"),a})),d=0,s=0;s<r.leaves().length;s++){var c=r.leaves()[s].depth;checkExistElement(range_of_deep,c)||(range_of_deep.push(c),c>d&&(d=c))}max_depth=d;var o=getNumbersForRange(range_of_deep),p=o[2],l=o[1],u=o[0],v=d3.scaleOrdinal().range(["#59559e","#156f8f"]),h=d3.scaleOrdinal().range(["#8dbffa","#00f4ff"]),f=d3.scaleOrdinal().range(["#d4dded","#d0ffff"]),g=d3.format(",d");i.append("rect").attr("id",(function(e){return e.data.id})).attr("class",(function(e){var t="vs-rect ";return e.data.hasOwnProperty("parent_id")&&(t=t+"parentId("+e.data.parent_id+")"),t})).attr("width",(function(e){return e.x1-e.x0})).attr("height",(function(e){return e.y1-e.y0})).attr("fill",(function(e){return p.includes(e.depth)?v(e.parent.data.id,e.depth):l.includes(e.depth)?h(e.parent.data.id,e.depth):u.includes(e.depth)?f(e.parent.data.id,e.depth):void 0})),i.append("clipPath").attr("id",(function(e){return"clip-"+e.data.id})).append("use").attr("xlink:href",(function(e){return"#"+e.data.id})),i.append("text").attr("clip-path",(function(e){return"url(#clip-"+e.data.id+")"})).selectAll("tspan").data((function(e){return void 0!==e.data.name?e.data.name.split(/(?=[A-Z][^A-Z])/g):e.data.content.split(/(?=[A-Z][^A-Z])/g)})).attr("color",(function(e){if(p.includes(e.depth))return"#fff"})).enter().append("tspan").attr("x",4).attr("y",(function(e,t){return 13+10*t})).text((function(e){return e})),i.append("title").text((function(e){return e.data.id+"\n"+g(e.value)})),d3.selectAll("input").data([e],(function(e){return e?e.name:this.value})).on("change",n)}))}))}));