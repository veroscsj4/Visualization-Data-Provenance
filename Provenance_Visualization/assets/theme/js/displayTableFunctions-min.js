function backwardTracingRect(e,t,a){var n=function(e,t){document.getElementsByClassName(e).length?t():setTimeout((function(){n(color,t)}),100)},i="vs-input-backward-tracing";n(i,(function(){var n=document.getElementsByClassName(i)[0].value,r=document.getElementsByClassName("vs-input-selected-element")[0].value,s="id("+e+")",l=a.replace("parentId","id"),o="operator("+t+")",d="operator("+getNeighbourOperator(t,"forward")+")";console.log(r),$(".vs-nested-table > g ").each((function(e){var t=$(this).attr("id").split(" "),a=t[0];if(3==t.length){var i=t[2];a==s&&i==d&&$(this).find("rect").attr("fill",r),a==l&&i==o&&$(this).find("rect").attr("fill",n)}else if(2==t.length){var i=t[1];a==s&&i==d&&$(this).find("rect").attr("fill",r),a==l&&i==o&&$(this).find("rect").attr("fill",n)}}))}))}function forwardTracingRect(e,t){var a=function(e,t){document.getElementsByClassName(e).length?t():setTimeout((function(){a(color,t)}),100)},n="vs-input-forward-tracing";a(n,(function(){var a=document.getElementsByClassName(n)[0].value,i=document.getElementsByClassName("vs-input-selected-element")[0].value,r="id("+e+")",s=getNeighbourOperator(t,"forward"),l="operator("+t+")";s?(s="operator("+s+")",$(".vs-nested-table > g ").each((function(e){var t=$(this).attr("id").split(" "),n=t[0];if(3==t.length){var o=t[2];n==r&&o==l&&$(this).find("rect").attr("fill",i),n==r&&o==s&&$(this).find("rect").attr("fill",a)}if(2==t.length){var o=t[1];n==r&&o==l&&$(this).find("rect").attr("fill",i),n==r&&o==s&&$(this).find("rect").attr("fill",a)}}))):console.log("this element was the last output")}))}function getNumberOfChildren(e){var t=0,a;for(i=0;i<outputOfEachOperator.length;i++)outputOfEachOperator[i].forEach((n=>{if(n.hasOwnProperty("children")&&n.name==e){if(1===n.children.length)return a="<div class='vs-span-modal-nested-table'>This is your input, which means that you have no data that would have been modified here</div>";n.children.forEach((e=>{void 0!==e.operator&&(t+=1)})),a="<div class='vs-span-modal-nested-table'>The output number of this operator were "+t+"</div>"}}));return a}function getIdAndOperatorRect(e){var t;return e.split(".")}function getTimelineAndTable(e,t){var a=e.split("."),n,r,s,l=$('<ul class="vs-timeline" id="#vs-timeline"></ul>');for(i=0;i<a.length;i++)if(i==a.length-2&&(n=a[i]),i<a.length-1)$(l).append("<li>"+a[i]+"</li>");else if(i<a.length){$(l).append("<li>ID: "+a[i]+"</li>"),r=a[i];var o=getDataFromTupel(a[i],n);console.log("data_from_tupel ="+o.length);var d=getTableForDataOfTupel(o,"table-for-modal"),c=d[0],s=d[1][1]}var u=$('<div class="vs-modal-nested-table-content uk-grid" uk-grid></div>'),v=$('<div class="vs-modal-nested-table-tracing uk-width-2-3 uk-padding-remove"></div>'),h=$('<div class="vs-modal-for-tracing-buttons uk-margin-medium-top uk-flex uk-flex-center"></div>'),p=$('<div class="vs-container-for-tracing-description uk-flex uk-flex-center uk-margin-top"></div>'),f=$('<div class="vs-modal-nested-table-container uk-box-shadow-medium ">'+c.outerHTML+"</div>"),g,b;v.append(f);var m=r,k=n,w=getNeighbourOperator(k,"forward"),T;"false"!=getNeighbourOperator(k,"backward")&&(g=$('<button class="uk-button uk-button-secondary uk-margin-right vs-button-backward-tracing" id="vs-button-backward-tracing" onClick=backwardTracing('+s+',"'+k+'"); >Backward Tracing</button>'),h.append(g)),"false"!=w&&(b=$('<button class="uk-button uk-button-secondary vs-button-forward-tracing" id="vs-button-forward-tracing" onClick=forwardTracing('+m+',"'+k+'"); >Forward Tracing</button>'),h.append(b)),v.append(h),v.append(p);var y=$('<div class="vs-timeline-container uk-width-1-3 "><h3 class="uk-text-primary">Workflow</h3></div>');y.append(l),u.append(y),u.append(v),t.append(u)}function getDataFromTupel(e,t){var a=[];for(console.log("data_from_tupel "+e+" "+t+" from getDataFromTupel"),i=0;i<outputOfEachOperator.length;i++)outputOfEachOperator[i].forEach((n=>{n.hasOwnProperty("children")&&n.name===t&&(console.log(n),n.children.forEach((n=>{void 0!==n.operator&&n.operator==t&&n.id==e&&a.push(n)})))}));return a}function addHeadersTable(e,t){var a=[],n=e.createTHead(),i=e.insertRow(0);console.log("keys = "+t.length),t.forEach((function(e){var t=i.insertCell(),a=e.replace("_"," ");t.outerHTML="<th>"+a+"</th>"})),n.appendChild(i)}function getTableForDataOfTupel(e,t){var a=document.createElement("table"),n=e[0].operator;if(console.log("operator = "+n),"table_for_directed_graph"===t){a.setAttribute("class","vs-table-for-directed-graph");var i="vs-table-for-directed-graph-"+n;a.setAttribute("id",i)}else a.setAttribute("class","uk-table uk-table-responsive uk-table-divider vs-modal-table");for(var r=0;r<e.length;r++){var s=e[r],l=getPositionAndElement("parent_id",s),o=a.insertRow();Object.keys(s).forEach((function(e,t){var a;o.insertCell().appendChild(document.createTextNode(s[e]))}))}return addHeadersTable(a,Object.keys(e[0])),[a,l]}function getPositionAndElement(e,t){var a,n;return Object.keys(t).forEach(((i,r)=>{i===e&&(a=r,n=t[i])})),[a,n]}var modal_for_nested_table="nested-table";$(document).ready((function(){var e=function(t,a){document.getElementsByClassName(t).length?a():setTimeout((function(){e(t,a)}),100)},t;e("vs-rect",(function(){$(".vs-rect").bind("contextmenu",(function(e){e.preventDefault();var t=$(this).attr("id"),a=$(this).attr("class").split(" "),n=$(this).position(),i=n.left-200;i>1250&&(i=1250);var r=n.top-130,s=getIdAndOperatorRect(t),l=s[s.length-1],o=s[s.length-2],d;if(s.length>2&&a.length>=2){d=s[s.length-3];var c=a[1],u=$('<li><button class="uk-button uk-button-text" onclick=backwardTracingRect('+l+',"'+d+'","'+c+'"); >Backward Tracing</button></li>');$(".vs-right-nested-table-menu").append(u)}$(".vs-right-nested-table-menu > li").length&&$(".vs-right-nested-table-menu > li").remove();var v=$('<li><button class="uk-button uk-button-text" onclick=forwardTracingRect('+l+',"'+o+'")>Forward Tracing</button></li>'),h=$('<li><button class="uk-button uk-button-text" onclick=allTracingRect('+l+',"'+o+'")>See All Tracing</button></li>');$(".vs-right-nested-table-menu").append(u),$(".vs-right-nested-table-menu").append(v),$(".vs-right-nested-table-menu").append(h),$(".vs-right-nested-table-menu").finish().toggle(100),$(".vs-right-nested-table-menu").css({top:r+"px",left:i+"px"})})),$(".vs-rect").bind("mousedown",(function(e){!$(e.target).parents(".vs-right-nested-table-menu").length>0&&$(".vs-right-nested-table-menu").hide(100)})),$(".vs-right-nested-table-menu li").click((function(){$(".vs-right-nested-table-menu").hide(100)})),$(".vs-rect").dblclick((function(){var e=createModal(modal_for_nested_table),t=$(this).attr("id"),a="vs-panel-id-"+t,n=e.attr("id"),i="#"+e.attr("id"),r=$("<div class='vs-close-container'><span class='vs-close vs-close-modal' onClick=closeModal('"+n+"'); >&times;</span></div>"),s=$('<div class="vs-panel" id="'+a+'"></div>');s.append(r),e.append(s),getTimelineAndTable(t,s),$("#vs-visualization").append(e),$("#content").addClass("vs-overlay"),$(i).css("display","block"),$(".vs-modal").draggable(),adaptHeightForCss(a,n),$(".vs-timeline li").mouseover((function(){if($(this).hasClass("vs-has-already-been-selected"))$(this).find("div.vs-span-modal-nested-table").show();else{$(this).addClass("vs-has-already-been-selected");var e,t=getNumberOfChildren($(this).text());$(this).append(t),$(this).find("div.vs-span-modal-nested-table").show()}})),$(".vs-timeline li").mouseleave((function(){$(this).hasClass("vs-has-already-been-selected")&&$(this).find("div.vs-span-modal-nested-table").hide()})),$("#vs-save-color-combination-checkbox").checked&&alert("yees")}))}))}));